(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a398160"],{"0750":function(e,t,a){},"497f":function(e,t,a){"use strict";a("683d")},6220:function(e,t,a){},"683d":function(e,t,a){},"9b4e":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),n={class:"habits"};function r(e,t,a,r,b,i){var s=Object(c["H"])("page-title"),u=Object(c["H"])("add-item"),o=Object(c["H"])("habit-info"),l=Object(c["H"])("habit-frequency");return Object(c["z"])(),Object(c["g"])("div",n,[Object(c["k"])(s,null,{default:Object(c["N"])((function(){return[Object(c["j"])(Object(c["J"])(e.t("habitPage.title")),1)]})),_:1}),e.showAddItem?(Object(c["z"])(),Object(c["e"])(u,{key:0,mode:"habit",onClose:t[0]||(t[0]=function(t){e.showAddItem=!1,e.resetAddItemModalValue()}),onAddItem:e.addItem},null,8,["onAddItem"])):Object(c["f"])("",!0),e.habit?(Object(c["z"])(),Object(c["e"])(o,{key:1,habit:e.habit},null,8,["habit"])):Object(c["f"])("",!0),e.habit?(Object(c["z"])(),Object(c["e"])(l,{key:2,habit:e.habit},null,8,["habit"])):Object(c["f"])("",!0)])}var b=a("1da1"),i=(a("96cf"),a("47e2")),s=a("6c02"),u=a("5502"),o=a("89dd"),l=a("9c11"),j=a("426c"),d=(a("a4d3"),a("e01a"),a("b0c0"),{key:0,class:"text-sm text-gray-400"}),O={key:0,class:"daily-habit-item__time-block"},f=["datetime"],h=Object(c["j"])(" - "),m=["datetime"],v={class:"text-sm text-gray-400"};function p(e,t,a,n,r,b){var i=Object(c["H"])("tag"),s=Object(c["H"])("card");return Object(c["z"])(),Object(c["e"])(s,{class:"habit-info"},{title:Object(c["N"])((function(){return[Object(c["j"])(Object(c["J"])(e.habit.description)+"  ",1),e.endDate?(Object(c["z"])(),Object(c["g"])("span",d,"   "+Object(c["J"])(e.t("habitFreqComponent.ends"))+" "+Object(c["J"])(e.endDate),1)):Object(c["f"])("",!0),e.habit.categoryId?(Object(c["z"])(),Object(c["e"])(i,{key:1,variant:"indigo"},{default:Object(c["N"])((function(){var t;return[Object(c["j"])(Object(c["J"])(e.t("categories.".concat(null===(t=e.getCategory(e.habit.categoryId))||void 0===t?void 0:t.name))),1)]})),_:1})):Object(c["f"])("",!0)]})),body:Object(c["N"])((function(){return[e.habit.startTime&&e.habit.endTime?(Object(c["z"])(),Object(c["g"])("p",O,[Object(c["h"])("time",{datetime:e.habit.startTime,class:"time-block"},Object(c["J"])(e.habit.startTime),9,f),h,Object(c["h"])("time",{datetime:e.habit.startTime,class:"time-block"},Object(c["J"])(e.habit.endTime),9,m)])):Object(c["f"])("",!0),Object(c["h"])("p",v,Object(c["J"])(e.getDays(e.habit)),1)]})),_:1})}a("a15b"),a("d81d");var g=a("ae8d"),y=a("ff0a"),_=a("c009"),k=a("a2fe"),q=Object(c["l"])({components:{Card:g["a"],Tag:_["a"]},props:{habit:{type:Object,required:!0}},setup:function(e){var t=Object(i["b"])(),a=t.t,c=Object(y["b"])(e.habit.endDate||0),n=function(e){return e.days.map((function(e){return a("days.full.".concat(e))})).join(", ")};return{t:a,endDate:c,getDays:n,getCategory:k["b"]}}});a("eb0e");q.render=p;var w=q,D=(a("b64b"),a("99af"),{class:"habit-freq__controls"}),I=Object(c["h"])("div",{class:"habit-freq__labels"},[Object(c["h"])("div",{class:"habit-freq__labels-item"},[Object(c["h"])("div",{class:"habit-freq__labels-done"}),Object(c["j"])("Done ")]),Object(c["h"])("div",{class:"habit-freq__labels-item"},[Object(c["h"])("div",{class:"habit-freq__labels-missed"}),Object(c["j"])(" Missed ")]),Object(c["h"])("div",{class:"habit-freq__labels-item"},[Object(c["h"])("div",{class:"habit-freq__labels-open"}),Object(c["j"])(" Open ")]),Object(c["h"])("div",{class:"habit-freq__labels-item"},[Object(c["h"])("div",{class:"habit-freq__labels-skip"}),Object(c["j"])(" Skipped ")])],-1),z={class:"habit-freq__year"},H=["value"],J={key:0,class:"habit-freq__blocks"},F={class:"habit-freq__month-days"};function Y(e,t,a,n,r,b){var i=Object(c["H"])("select-field"),s=Object(c["H"])("frequency-block"),u=Object(c["H"])("card");return Object(c["z"])(),Object(c["e"])(u,{class:"habit-freq"},{body:Object(c["N"])((function(){return[Object(c["h"])("div",D,[I,Object(c["h"])("div",z,[Object(c["k"])(i,{modelValue:e.selectedYear,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedYear=t})},{default:Object(c["N"])((function(){return[(Object(c["z"])(),Object(c["g"])(c["a"],null,Object(c["F"])(10,(function(t){return Object(c["h"])("option",{key:t,value:e.createYear(t)},Object(c["J"])(e.createYear(t)),9,H)})),64))]})),_:1},8,["modelValue"])])]),e.loading?Object(c["f"])("",!0):(Object(c["z"])(),Object(c["g"])("div",J,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(Object.keys(e.monthDays),(function(t){return Object(c["z"])(),Object(c["g"])("div",{key:t,class:"habit-freq__month"},[Object(c["h"])("p",null,[Object(c["h"])("strong",null,Object(c["J"])(e.t("months.keys.".concat(t))),1)]),Object(c["h"])("div",F,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(e.monthDays[t].days,(function(a){return Object(c["z"])(),Object(c["e"])(s,{number:a,key:"".concat(t,"_").concat(a),status:e.getStatus(new Date(e.monthDays[t].fullYear,t,a))},null,8,["number","status"])})),128))])])})),128))]))]})),_:1})}function A(e,t,a,n,r,b){return Object(c["z"])(),Object(c["g"])("div",{class:Object(c["s"])(["habit-freq-block",["habit-freq-block--".concat(e.status)]])},Object(c["J"])(e.number),3)}a("a9e3");var x=Object(c["l"])({props:{status:{type:String,default:"open"},number:{type:Number,required:!0}}});a("497f");x.render=A;var C=x,E=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},M=function(e){for(var t,a=e||(new Date).getFullYear(),c={},n=0;n<=11;n+=1)t=new Date(a,n+1,0),c[n]={fullYear:a,monthId:n,days:t.getDate()};return c},N=a("220a"),T=Object(c["l"])({components:{FrequencyBlock:C,Card:g["a"],SelectField:N["a"]},props:{habit:{type:Object,required:!0}},setup:function(e){var t=Object(u["b"])(),a=Object(i["b"])(),n=a.t,r=Object(c["E"])((new Date).getFullYear()),s=Object(c["E"])([]),o=Object(c["E"])(!1),l=Object(c["E"])(M(r.value)),d=0,O=function(){var a=Object(b["a"])(regeneratorRuntime.mark((function a(){var c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o.value=!0,a.next=3,t.dispatch("habits/fetchCount",{id:e.habit.id,year:r.value});case 3:if(c=a.sent,o.value=!1,!(c instanceof j["a"])){a.next=8;break}return console.log(c),a.abrupt("return");case 8:s.value=c,l.value=M(r.value);case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),f=function(e){var t=2021;return t+e},h=function(e){var t="open";while(d<s.value.length){var a=s.value[d],c=new Date(a.date);if(E(c,e)){t=a.status;break}if(c>e)break;d+=1}return t};return Object(c["M"])(r,(function(){O(),d=0})),O(),{t:n,loading:o,createYear:f,selectedYear:r,monthDays:l,getLocalDate:y["b"],getStatus:h}}});a("c92b");T.render=Y;var S=T,V=a("23e8"),R=a("0e5e"),L=Object(c["l"])({components:{PageTitle:o["a"],AddItem:l["a"],HabitFrequency:S,HabitInfo:w},setup:function(){var e=Object(R["a"])(),t=e.setLoading,a=e.setServerError,n=e.resetAddItemModalValue,r=Object(i["b"])(),o=r.t,l=Object(s["c"])(),d=Object(u["b"])(),O=Object(c["E"])(!1),f=Object(c["E"])(),h=Object(c["E"])([]),m=Object(c["E"])(!1);d.dispatch("habits/get",l.params.id).then((function(e){e instanceof j["a"]&&!j["c"].NotFound?m.value=!0:(f.value=d.state.habits.currentHabit,h.value=d.state.habits.currentHabitCount)})),Object(c["M"])((function(){return d.state.habits.currentHabitCount}),(function(e){h.value=e}));var v=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(c){var r,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Object(V["a"])(c),e.next=3,d.dispatch("habits/add",r);case 3:if(b=e.sent,!(b instanceof j["a"])){e.next=8;break}return t(!1),a(o("addItemComponent.errors.cannotAddItem")),e.abrupt("return");case 8:O.value=!1,n();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{t:o,addItem:v,showAddItem:O,resetAddItemModalValue:n,error:m,habit:f}}});L.render=r;t["default"]=L},a15b:function(e,t,a){"use strict";var c=a("23e7"),n=a("44ad"),r=a("fc6a"),b=a("a640"),i=[].join,s=n!=Object,u=b("join",",");c({target:"Array",proto:!0,forced:s||!u},{join:function(e){return i.call(r(this),void 0===e?",":e)}})},c92b:function(e,t,a){"use strict";a("6220")},eb0e:function(e,t,a){"use strict";a("0750")}}]);
//# sourceMappingURL=chunk-2a398160.0a27cfc1.js.map