{"version":3,"sources":["webpack:///./src/components/habit/Frequency/FrequencyBlock.vue?e41c","webpack:///./src/views/Habit.vue","webpack:///./src/components/habit/Frequency/HabitInfo.vue","webpack:///./src/components/habit/Frequency/HabitInfo.vue?d456","webpack:///./src/components/habit/Frequency/HabitInfo.vue?3559","webpack:///./src/components/habit/Frequency/HabitFrequency.vue","webpack:///./src/components/habit/Frequency/FrequencyBlock.vue","webpack:///./src/components/habit/Frequency/FrequencyBlock.vue?13c1","webpack:///./src/components/habit/Frequency/FrequencyBlock.vue?e3cf","webpack:///./src/components/habit/features/time.ts","webpack:///./src/components/habit/Frequency/HabitFrequency.vue?a3d1","webpack:///./src/components/habit/Frequency/HabitFrequency.vue?78d5","webpack:///./src/views/Habit.vue?e5fb","webpack:///./src/views/Habit.vue?d87f","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/components/habit/Frequency/HabitFrequency.vue?26a4","webpack:///./src/components/habit/Frequency/HabitInfo.vue?c5ad"],"names":["class","t","showAddItem","mode","resetAddItemModalValue","addItem","habit","title","description","endDate","categoryId","variant","getCategory","name","body","startTime","endTime","datetime","getDays","components","Card","Tag","props","type","Object","required","setup","days","map","day","join","render","selectedYear","i","key","value","createYear","loading","keys","monthDays","monthKey","date","number","status","getStatus","Date","fullYear","String","default","Number","compareDate","habitDate","currentDate","getFullYear","getMonth","getDate","getMonthsAndDays","year","monthsAndDays","monthId","FrequencyBlock","SelectField","store","habitCount","pointer","fetchCount","dispatch","id","result","console","log","index","base","length","habitCountItem","getLocalDate","PageTitle","AddItem","HabitFrequency","HabitInfo","setLoading","setServerError","route","error","params","then","NotFound","state","habits","currentHabit","currentHabitCount","newValue","formData","requestData","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","STRICT_METHOD","target","proto","forced","separator","call","this","undefined"],"mappings":"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","file":"js/chunk-2a398160.0a27cfc1.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FrequencyBlock.vue?vue&type=style&index=0&id=dbbb9baa&lang=scss\"","<template>\n  <div class=\"habits\">\n    <page-title>\n      {{t('habitPage.title')}}\n    </page-title>\n    <add-item\n      v-if=\"showAddItem\"\n      mode=\"habit\"\n      @close=\"showAddItem = false; resetAddItemModalValue()\"\n      @addItem=\"addItem\"\n    />\n    <habit-info v-if=\"habit\" :habit=\"habit\" />\n    <habit-frequency v-if=\"habit\" :habit=\"habit\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport PageTitle from '@/components/PageTitle.vue';\nimport AddItem from '@/components/AddItem/AddItem.vue';\nimport {\n  AppError, ErrorCode, Habit, HabitCount, ToDoItemForm,\n} from '@/types/shared';\nimport HabitInfo from '@/components/habit/Frequency/HabitInfo.vue';\nimport HabitFrequency from '@/components/habit/Frequency/HabitFrequency.vue';\nimport { HabitState } from '@/store/habit';\nimport { createHabitItemReq } from '@/components/AddItem/features/helpers';\nimport { useAddItemState } from '@/components/AddItem/features/hooks/addItemGlobalState';\n\nexport default defineComponent({\n  components: {\n    PageTitle,\n    AddItem,\n    HabitFrequency,\n    HabitInfo,\n  },\n  setup() {\n    const { setLoading, setServerError, resetAddItemModalValue } = useAddItemState();\n    const { t } = useI18n();\n    const route = useRoute();\n    const store = useStore();\n    const showAddItem = ref(false);\n    const habit = ref<Habit>();\n    const habitCount = ref<HabitCount[]>([]);\n    const error = ref(false);\n    store.dispatch('habits/get', route.params.id).then((result) => {\n      if (result instanceof AppError && !ErrorCode.NotFound) {\n        error.value = true;\n        return;\n      }\n\n      habit.value = (store.state.habits as HabitState).currentHabit;\n      habitCount.value = (store.state.habits as HabitState).currentHabitCount;\n    });\n\n    watch(\n      () => store.state.habits.currentHabitCount,\n      (newValue) => { habitCount.value = newValue; },\n    );\n\n    const addItem = async (formData: ToDoItemForm) => {\n      const requestData = createHabitItemReq(formData);\n      const result = await store.dispatch('habits/add', requestData);\n      if (result instanceof AppError) {\n        setLoading(false);\n        setServerError(t('addItemComponent.errors.cannotAddItem'));\n        return;\n      }\n      showAddItem.value = false;\n      resetAddItemModalValue();\n    };\n\n    return {\n      t,\n      addItem,\n      showAddItem,\n      resetAddItemModalValue,\n      error,\n      habit,\n    };\n  },\n});\n</script>\n","<template>\n  <card class=\"habit-info\">\n    <template #title>\n      {{habit.description}}&nbsp;\n      <span v-if=\"endDate\" class=\"text-sm text-gray-400\">\n        &nbsp; {{t('habitFreqComponent.ends')}} {{endDate}}\n      </span>\n      <tag v-if=\"habit.categoryId\" variant=\"indigo\">\n        {{t(`categories.${getCategory(habit.categoryId)?.name}`)}}\n      </tag>\n    </template>\n    <template #body>\n      <p v-if=\"habit.startTime && habit.endTime\" class=\"daily-habit-item__time-block\">\n        <time :datetime=\"habit.startTime\" class=\"time-block\">{{habit.startTime}}</time> -\n        <time :datetime=\"habit.startTime\" class=\"time-block\">{{habit.endTime}}</time>\n      </p>\n      <p class=\"text-sm text-gray-400\">\n        {{ getDays(habit) }}\n      </p>\n    </template>\n  </card>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { Habit } from '@/types/shared';\nimport Card from '@/components/Card.vue';\nimport { getLocalDate } from '@/services/utils/time';\nimport Tag from '@/components/Tag.vue';\nimport { getCategory } from '@/types/categories';\n\nexport default defineComponent({\n  components: {\n    Card,\n    Tag,\n  },\n  props: {\n    habit: {\n      type: Object as PropType<Habit>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const { t } = useI18n();\n    const endDate = getLocalDate(props.habit.endDate || 0);\n    const getDays = (habit: Habit) => habit.days.map((day) => t(`days.full.${day}`)).join(', ');\n\n    return {\n      t,\n      endDate,\n      getDays,\n      getCategory,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n.habit-info {\n  @apply my-2;\n  width: 75%;\n\n  @media screen and (max-width: 700px) {\n    width: 100%;\n  }\n\n  &__blocks {\n    @apply flex flex-wrap mt-2;\n  }\n\n  &__heading {\n    @apply text-lg font-bold;\n  }\n}\n</style>\n","\nimport { defineComponent, PropType } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { Habit } from '@/types/shared';\nimport Card from '@/components/Card.vue';\nimport { getLocalDate } from '@/services/utils/time';\nimport Tag from '@/components/Tag.vue';\nimport { getCategory } from '@/types/categories';\n\nexport default defineComponent({\n  components: {\n    Card,\n    Tag,\n  },\n  props: {\n    habit: {\n      type: Object as PropType<Habit>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const { t } = useI18n();\n    const endDate = getLocalDate(props.habit.endDate || 0);\n    const getDays = (habit: Habit) => habit.days.map((day) => t(`days.full.${day}`)).join(', ');\n\n    return {\n      t,\n      endDate,\n      getDays,\n      getCategory,\n    };\n  },\n});\n","import { render } from \"./HabitInfo.vue?vue&type=template&id=4a327e82\"\nimport script from \"./HabitInfo.vue?vue&type=script&lang=ts\"\nexport * from \"./HabitInfo.vue?vue&type=script&lang=ts\"\n\nimport \"./HabitInfo.vue?vue&type=style&index=0&id=4a327e82&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <card class=\"habit-freq\">\n    <template #body>\n      <div class=\"habit-freq__controls\">\n        <div class=\"habit-freq__labels\">\n          <div class=\"habit-freq__labels-item\">\n            <div class=\"habit-freq__labels-done\"></div>Done\n          </div>\n          <div class=\"habit-freq__labels-item\">\n            <div class=\"habit-freq__labels-missed\"></div> Missed\n          </div>\n          <div class=\"habit-freq__labels-item\">\n            <div class=\"habit-freq__labels-open\"></div> Open\n          </div>\n          <div class=\"habit-freq__labels-item\">\n            <div class=\"habit-freq__labels-skip\"></div> Skipped\n          </div>\n\n        </div>\n        <div class=\"habit-freq__year\">\n          <select-field v-model=\"selectedYear\">\n            <option v-for=\"i in 10\" :key=\"i\" :value=\"createYear(i)\">{{createYear(i)}}</option>\n          </select-field>\n        </div>\n      </div>\n      <div v-if=\"!loading\" class=\"habit-freq__blocks\">\n        <div v-for=\"monthKey in Object.keys(monthDays)\" :key=\"monthKey\" class=\"habit-freq__month\">\n            <p><strong>{{t(`months.keys.${monthKey}`)}}</strong></p>\n            <div class=\"habit-freq__month-days\">\n              <frequency-block\n                v-for=\"date in monthDays[monthKey].days\"\n                :number=\"date\"\n                :key=\"`${monthKey}_${date}`\"\n                :status=\"getStatus(new Date(monthDays[monthKey].fullYear, monthKey, date))\"\n              />\n            </div>\n        </div>\n      </div>\n    </template>\n  </card>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent, PropType, ref, watch,\n} from 'vue';\nimport { useStore } from 'vuex';\nimport { useI18n } from 'vue-i18n';\nimport {\n  AppError, Habit, HabitCount, Status,\n} from '@/types/shared';\nimport FrequencyBlock from '@/components/habit/Frequency/FrequencyBlock.vue';\nimport Card from '@/components/Card.vue';\nimport { getLocalDate } from '@/services/utils/time';\nimport { getMonthsAndDays, compareDate } from '@/components/habit/features/time';\nimport SelectField from '@/components/forms/SelectField.vue';\n\n// Need to account for days that we forget to update list and set everything to missed\n// Only check for days that the habit is set for\n\nexport default defineComponent({\n  components: {\n    // eslint-disable-next-line vue/no-unused-components\n    FrequencyBlock,\n    Card,\n    SelectField,\n  },\n  props: {\n    habit: {\n      type: Object as PropType<Habit>,\n      required: true,\n    },\n  },\n  setup(props) {\n    // todo\n    const store = useStore();\n    const { t } = useI18n();\n    const selectedYear = ref(new Date().getFullYear());\n    const habitCount = ref<HabitCount[]>([]);\n    const loading = ref(false);\n    const monthDays = ref(getMonthsAndDays(selectedYear.value));\n    let pointer = 0;\n\n    const fetchCount = async () => {\n      loading.value = true;\n      const result = await store.dispatch('habits/fetchCount', {\n        id: props.habit.id,\n        year: selectedYear.value,\n      });\n\n      loading.value = false;\n      if (result instanceof AppError) {\n        console.log(result);\n        return;\n      }\n      habitCount.value = result;\n      monthDays.value = getMonthsAndDays(selectedYear.value);\n    };\n\n    const createYear = (index: number) => {\n      const base = 2021;\n      return base + index;\n    };\n\n    const getStatus = (currentDate: Date): Status => {\n      let status: Status = 'open';\n\n      while (pointer < habitCount.value.length) {\n        const habitCountItem = habitCount.value[pointer];\n        const habitDate = new Date(habitCountItem.date);\n\n        if (compareDate(habitDate, currentDate)) {\n          status = habitCountItem.status;\n          break;\n        }\n\n        if (habitDate > currentDate) break;\n\n        pointer += 1;\n      }\n\n      return status;\n    };\n\n    watch(selectedYear, () => {\n      fetchCount();\n      pointer = 0;\n    });\n\n    fetchCount();\n\n    return {\n      t,\n      loading,\n      createYear,\n      selectedYear,\n      monthDays,\n      getLocalDate,\n      getStatus,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n@import '@/assets/styles/utils/_functions.scss';\n\n.habit-freq {\n  @apply my-2;\n  width: 75%;\n\n  @media screen and (max-width: 700px) {\n    width: 100%;\n  }\n\n  .card__body {\n    @apply overflow-hidden;\n    max-width: remSize(800px);\n    min-height: remSize(260px);\n  }\n\n  &__blocks {\n    @apply flex flex-wrap;\n  }\n\n  &__heading {\n    @apply text-lg font-bold;\n  }\n\n  &__controls {\n    @apply flex justify-between;\n  }\n\n  &__year {\n    width: remSize(100px);\n  }\n\n  &__month {\n    flex: 0 0 33%;\n  }\n\n  &__month-days {\n    @apply flex flex-wrap text-xs text-center;\n  }\n\n  &__labels {\n    @apply flex items-center text-xs flex-wrap;\n  }\n\n  [class*=habit-freq__labels-]:not(.habit-freq__labels-item) {\n    @apply inline-block mx-1;\n    width: remSize(12px);\n    height: remSize(12px);\n  }\n\n  &__labels-missed {\n    @apply bg-gray-300;\n  }\n\n  &__labels-open {\n    @apply bg-gray-100;\n  }\n\n  &__labels-skip {\n    @apply bg-blue-300;\n  }\n\n  &__labels-done {\n    @apply bg-green-300;\n  }\n\n  &__labels-ignore {\n    @apply bg-white;\n  }\n}\n</style>\n","<template>\n  <div class=\"habit-freq-block\" :class=\"[`habit-freq-block--${status}`]\">\n    {{number}}\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { Status } from '@/types/shared';\n\nexport default defineComponent({\n  props: {\n    status: {\n      type: String as PropType<Status>,\n      default: 'open',\n    },\n    number: {\n      type: Number,\n      required: true,\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n@import '@/assets/styles/utils/_functions.scss';\n\n.habit-freq-block {\n  @apply bg-gray-100 mx-0.5 my-0.5;\n  width: remSize(18px);\n  height: remSize(18px);\n\n  &--missed {\n    @apply bg-gray-300;\n  }\n\n  &--skip {\n    @apply bg-blue-300;\n  }\n\n  &--done {\n    @apply bg-green-300;\n  }\n\n  &-tooltip {\n    .tooltip__text {\n      width: remSize(95px)\n    }\n  }\n}\n</style>\n","\nimport { defineComponent, PropType } from 'vue';\nimport { Status } from '@/types/shared';\n\nexport default defineComponent({\n  props: {\n    status: {\n      type: String as PropType<Status>,\n      default: 'open',\n    },\n    number: {\n      type: Number,\n      required: true,\n    },\n  },\n});\n","import { render } from \"./FrequencyBlock.vue?vue&type=template&id=dbbb9baa\"\nimport script from \"./FrequencyBlock.vue?vue&type=script&lang=ts\"\nexport * from \"./FrequencyBlock.vue?vue&type=script&lang=ts\"\n\nimport \"./FrequencyBlock.vue?vue&type=style&index=0&id=dbbb9baa&lang=scss\"\nscript.render = render\n\nexport default script","/* eslint-disable import/prefer-default-export */\ninterface MonthAndDays {\n  fullYear: number,\n  monthId: number,\n  days: number\n}\n\n// need to refactor\nexport const compareDate = (habitDate: Date, currentDate: Date)\n  : boolean => habitDate.getFullYear() === currentDate.getFullYear()\n    && habitDate.getMonth() === currentDate.getMonth()\n    && habitDate.getDate() === currentDate.getDate();\n\nexport const getMonthsAndDays = (year?: number): Record<number, MonthAndDays> => {\n  const fullYear = year || new Date().getFullYear();\n  let date: Date;\n  const monthsAndDays: Record<number, MonthAndDays> = {};\n\n  for (let i = 0; i <= 11; i += 1) {\n    date = new Date(fullYear, i + 1, 0);\n    monthsAndDays[i] = {\n      fullYear,\n      monthId: i,\n      days: date.getDate(),\n    };\n  }\n\n  return monthsAndDays;\n};\n","\nimport {\n  defineComponent, PropType, ref, watch,\n} from 'vue';\nimport { useStore } from 'vuex';\nimport { useI18n } from 'vue-i18n';\nimport {\n  AppError, Habit, HabitCount, Status,\n} from '@/types/shared';\nimport FrequencyBlock from '@/components/habit/Frequency/FrequencyBlock.vue';\nimport Card from '@/components/Card.vue';\nimport { getLocalDate } from '@/services/utils/time';\nimport { getMonthsAndDays, compareDate } from '@/components/habit/features/time';\nimport SelectField from '@/components/forms/SelectField.vue';\n\n// Need to account for days that we forget to update list and set everything to missed\n// Only check for days that the habit is set for\n\nexport default defineComponent({\n  components: {\n    // eslint-disable-next-line vue/no-unused-components\n    FrequencyBlock,\n    Card,\n    SelectField,\n  },\n  props: {\n    habit: {\n      type: Object as PropType<Habit>,\n      required: true,\n    },\n  },\n  setup(props) {\n    // todo\n    const store = useStore();\n    const { t } = useI18n();\n    const selectedYear = ref(new Date().getFullYear());\n    const habitCount = ref<HabitCount[]>([]);\n    const loading = ref(false);\n    const monthDays = ref(getMonthsAndDays(selectedYear.value));\n    let pointer = 0;\n\n    const fetchCount = async () => {\n      loading.value = true;\n      const result = await store.dispatch('habits/fetchCount', {\n        id: props.habit.id,\n        year: selectedYear.value,\n      });\n\n      loading.value = false;\n      if (result instanceof AppError) {\n        console.log(result);\n        return;\n      }\n      habitCount.value = result;\n      monthDays.value = getMonthsAndDays(selectedYear.value);\n    };\n\n    const createYear = (index: number) => {\n      const base = 2021;\n      return base + index;\n    };\n\n    const getStatus = (currentDate: Date): Status => {\n      let status: Status = 'open';\n\n      while (pointer < habitCount.value.length) {\n        const habitCountItem = habitCount.value[pointer];\n        const habitDate = new Date(habitCountItem.date);\n\n        if (compareDate(habitDate, currentDate)) {\n          status = habitCountItem.status;\n          break;\n        }\n\n        if (habitDate > currentDate) break;\n\n        pointer += 1;\n      }\n\n      return status;\n    };\n\n    watch(selectedYear, () => {\n      fetchCount();\n      pointer = 0;\n    });\n\n    fetchCount();\n\n    return {\n      t,\n      loading,\n      createYear,\n      selectedYear,\n      monthDays,\n      getLocalDate,\n      getStatus,\n    };\n  },\n});\n","import { render } from \"./HabitFrequency.vue?vue&type=template&id=49b9210d\"\nimport script from \"./HabitFrequency.vue?vue&type=script&lang=ts\"\nexport * from \"./HabitFrequency.vue?vue&type=script&lang=ts\"\n\nimport \"./HabitFrequency.vue?vue&type=style&index=0&id=49b9210d&lang=scss\"\nscript.render = render\n\nexport default script","\nimport { defineComponent, ref, watch } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport PageTitle from '@/components/PageTitle.vue';\nimport AddItem from '@/components/AddItem/AddItem.vue';\nimport {\n  AppError, ErrorCode, Habit, HabitCount, ToDoItemForm,\n} from '@/types/shared';\nimport HabitInfo from '@/components/habit/Frequency/HabitInfo.vue';\nimport HabitFrequency from '@/components/habit/Frequency/HabitFrequency.vue';\nimport { HabitState } from '@/store/habit';\nimport { createHabitItemReq } from '@/components/AddItem/features/helpers';\nimport { useAddItemState } from '@/components/AddItem/features/hooks/addItemGlobalState';\n\nexport default defineComponent({\n  components: {\n    PageTitle,\n    AddItem,\n    HabitFrequency,\n    HabitInfo,\n  },\n  setup() {\n    const { setLoading, setServerError, resetAddItemModalValue } = useAddItemState();\n    const { t } = useI18n();\n    const route = useRoute();\n    const store = useStore();\n    const showAddItem = ref(false);\n    const habit = ref<Habit>();\n    const habitCount = ref<HabitCount[]>([]);\n    const error = ref(false);\n    store.dispatch('habits/get', route.params.id).then((result) => {\n      if (result instanceof AppError && !ErrorCode.NotFound) {\n        error.value = true;\n        return;\n      }\n\n      habit.value = (store.state.habits as HabitState).currentHabit;\n      habitCount.value = (store.state.habits as HabitState).currentHabitCount;\n    });\n\n    watch(\n      () => store.state.habits.currentHabitCount,\n      (newValue) => { habitCount.value = newValue; },\n    );\n\n    const addItem = async (formData: ToDoItemForm) => {\n      const requestData = createHabitItemReq(formData);\n      const result = await store.dispatch('habits/add', requestData);\n      if (result instanceof AppError) {\n        setLoading(false);\n        setServerError(t('addItemComponent.errors.cannotAddItem'));\n        return;\n      }\n      showAddItem.value = false;\n      resetAddItemModalValue();\n    };\n\n    return {\n      t,\n      addItem,\n      showAddItem,\n      resetAddItemModalValue,\n      error,\n      habit,\n    };\n  },\n});\n","import { render } from \"./Habit.vue?vue&type=template&id=b800f16a\"\nimport script from \"./Habit.vue?vue&type=script&lang=ts\"\nexport * from \"./Habit.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HabitFrequency.vue?vue&type=style&index=0&id=49b9210d&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HabitInfo.vue?vue&type=style&index=0&id=4a327e82&lang=scss\""],"sourceRoot":""}